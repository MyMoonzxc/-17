#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include<locale.h>

int main() {
    setlocale(LC_ALL, "RUS");
    int sizes[] = { 100, 1000, 10000 };
    int test_count = 3;
    int i, j, k, temp, min_idx, key;
    clock_t start, end;

    printf("Сравнение 4 сортировок\n");
    printf("======================\n\n");

    printf("размер | Пузырьком | Выбором | Коктейль | Вставками\n");
    printf("-------+----------+---------+--------+----------\n");

    for (k = 0; k < test_count; k++) {
        int n = sizes[k];
        int* arr1 = malloc(n * sizeof(int));
        int* arr2 = malloc(n * sizeof(int));
        int* arr3 = malloc(n * sizeof(int));
        int* arr4 = malloc(n * sizeof(int));

        // Заполняем случайными
        srand(time(NULL) + k);
        for (i = 0; i < n; i++) {
            int num = rand() % 10000;
            arr1[i] = num;
            arr2[i] = num;
            arr3[i] = num;
            arr4[i] = num;
        }

        printf("%6d |", n);

        // 1. ПУЗЫРЬКОВАЯ
        start = clock();
        for (i = 0; i < n - 1; i++) {
            for (j = 0; j < n - 1 - i; j++) {
                if (arr1[j] > arr1[j + 1]) {
                    temp = arr1[j];
                    arr1[j] = arr1[j + 1];
                    arr1[j + 1] = temp;
                }
            }
        }
        end = clock();
        printf(" %7.3f  |", (double)(end - start) / CLOCKS_PER_SEC);

        // 2. ВЫБОРОМ
        start = clock();
        for (i = 0; i < n - 1; i++) {
            min_idx = i;
            for (j = i + 1; j < n; j++) {
                if (arr2[j] < arr2[min_idx]) {
                    min_idx = j;
                }
            }
            if (min_idx != i) {
                temp = arr2[i];
                arr2[i] = arr2[min_idx];
                arr2[min_idx] = temp;
            }
        }
        end = clock();
        printf(" %7.3f  |", (double)(end - start) / CLOCKS_PER_SEC);

        // 3. КОКТЕЛЬНАЯ
        start = clock();
        int swapped = 1;
        int start_idx = 0;
        int end_idx = n - 1;

        while (swapped) {
            swapped = 0;

            // Слева направо
            for (i = start_idx; i < end_idx; i++) {
                if (arr3[i] > arr3[i + 1]) {
                    temp = arr3[i];
                    arr3[i] = arr3[i + 1];
                    arr3[i + 1] = temp;
                    swapped = 1;
                }
            }

            if (!swapped) break;

            swapped = 0;
            end_idx--;

            // Справа налево
            for (i = end_idx - 1; i >= start_idx; i--) {
                if (arr3[i] > arr3[i + 1]) {
                    temp = arr3[i];
                    arr3[i] = arr3[i + 1];
                    arr3[i + 1] = temp;
                    swapped = 1;
                }
            }

            start_idx++;
        }
        end = clock();
        printf(" %6.3f |", (double)(end - start) / CLOCKS_PER_SEC);

        // 4. ВСТАВКАМИ
        start = clock();
        for (i = 1; i < n; i++) {
            key = arr4[i];
            j = i - 1;
            while (j >= 0 && arr4[j] > key) {
                arr4[j + 1] = arr4[j];
                j--;
            }
            arr4[j + 1] = key;
        }
        end = clock();
        printf(" %7.3f\n", (double)(end - start) / CLOCKS_PER_SEC);

        free(arr1);
        free(arr2);
        free(arr3);
        free(arr4);
    }

    printf("\nИтоги:\n");
    printf("1. Пузырьком-самая медленная\n");
    printf("2. Коктейль чуть быстрее пузырька\n");
    printf("3. Выбором-средняя скорость\n");
    printf("4. Вставками-быстрее всех\n");

    return 0;
}
